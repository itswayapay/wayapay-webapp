<ion-header>
  <ion-toolbar color="primary">
    <ion-grid no-margin no-padding>
      <ion-row>
        <ion-col size="6">
          <div class="back-btn-wrapper" (click)="backRedirect()">
            <ion-icon name="arrow-back"></ion-icon><span> Verify</span>
          </div>
        </ion-col>
        <ion-col size="6" class="top-nav-logo-wrapper">
          <img src="../../../assets/logo/icon-white.svg" alt="Wayapay" routerLink="/account">
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ng-container *ngIf="!clickedSubmit; else loadingTemp">
    <ion-grid>
      <ion-row no-padding>
        <ion-col size="12" padding>
          <h3 class="form-title">Enter verification code</h3>
        </ion-col>
        <ion-col size="12">
          <form (keydown.enter)="$event.preventDefault()" class="verify-form">
            <input placeholder="•" (keyup)="updateList(input1, input2)" #input1 type="number" maxlength="1" id="input-1"
              name="input1" required>
            <input placeholder="•" (keyup)="updateList(input2, input3)" #input2 type="number" maxlength="1" id="input-2"
              name="input2" required>
            <input placeholder="•" (keyup)="updateList(input3, input4)" #input3 type="number" maxlength="1" id="input-3"
              name="input3" required>
            <input placeholder="•" (keyup)="updateList(input4, input5)" #input4 type="number" maxlength="1" id="input-4"
              name="input4" required>
            <input placeholder="•" (keyup)="updateList(input5, input6)" #input5 type="number" maxlength="1" id="input-5"
              name="input5" required>
            <input placeholder="•" type="number" maxlength="1" (keyup)="updateLast(input6)" #input6 id="input-6"
              name="input6" required>
          </form>
        </ion-col>
        <ion-col size="12">
          <p no-margin class="veridication-hint">Wayapay will send a 6-digit verification code to your phone</p>
          <p no-margin class="veridication-hint">
            If it's not detected automatically, check your messages and enter the code manually above.
          </p>

        </ion-col>
        <ion-col size="12" class="ion-align-self-ceter verify-btn-wrapper">
          <ion-button class="primary-btn-lg" shape="round" strong="true" expand="full" [disabled]="!code"
            (click)="submitForm()">Verify
          </ion-button>
        </ion-col>
        <ion-col size="12" class="ion-align-self-ceter">
          <ion-button class="primary-btn-lg" shape="round" strong="true" expand="full" color="primary" fill="outline"
            (click)="backRedirect()">
            Back
          </ion-button>
        </ion-col>

      </ion-row>
    </ion-grid>
  </ng-container>
  <ng-template #loadingTemp>

    <ng-container *ngIf="!verificationStatus; else successTemp">
      <ion-row class="ion-no-margin ion-no-padding">
        <ion-col size="12" class="ion-text-center">
          <h3 class="title-txt">Loading...</h3>
        </ion-col>
        <ion-col size="12" class="loading-top-wrapper">
          <div class="spinner">
            <div class="double-bounce1"></div>
            <div class="double-bounce2"></div>
          </div>
        </ion-col>
        <ng-container *ngIf="loadingData && loadingData.status">
          <ion-col size="12" class="ion-text-center">
            <span class="loading-msg-txt">{{loadingData.message}}</span>
          </ion-col>
        </ng-container>
      </ion-row>
    </ng-container>

    <ng-template #successTemp>
      <ion-row class="ion-no-margin ion-no-padding">
        <ion-col size="12" class="ion-text-center">
          <h3 class="title-txt">Successfull verification</h3>
          <p class="sub-title-txt">Click continue to verify your account</p>
        </ion-col>
        <ion-col size="12" class="ion-text-center success-tick-wrapper">
          <img src="../../../assets/icons/tick.svg" class="loading-success-tick" alt="Successfull registration"
            class="loading-success-icon">
        </ion-col>
        <ion-col size="12" class="ion-align-self-ceter pt-20">
          <ion-button class="primary-btn-lg" shape="round" strong="true" expand="full" fill="outline"
            (click)="routeToPin()">Continue
          </ion-button>
        </ion-col>
      </ion-row>
    </ng-template>

  </ng-template>
</ion-content>